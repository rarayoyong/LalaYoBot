import sqlite3
import os

def create_motivational_db(db_name='motivational_quotes.db'):
    try:
        # Проверка на существование базы данных
        if not os.path.exists(db_name):
            # Подключение к базе данных с использованием контекстного менеджера
            with sqlite3.connect(db_name) as conn:
                cursor = conn.cursor()

                # Создание таблицы quotes, если она не существует
                cursor.execute('''
                    CREATE TABLE IF NOT EXISTS quotes (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        quote TEXT NOT NULL UNIQUE
                    )
                ''')

                # Создание таблицы для хранения chat_id пользователей
                cursor.execute('''
                    CREATE TABLE IF NOT EXISTS users (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        chat_id INTEGER UNIQUE NOT NULL
                    )
                ''')

                # Мотивационные фразы для добавления в базу данных
                quotes = [
                    "Не сдавайся, каждый шаг приближает тебя к цели.",
                    "Твоя настойчивость - ключ к успеху.",
                    "Помни, что путь к победе начинается с первого шага.",
                    "Смелость - это начало, решительность - продолжение.",
                    "Каждое усилие приближает к результату.",
                    "Неудачи - это уроки, а не конец.",
                    "Трудности существуют, чтобы ты становился сильнее.",
                    "Не бойся идти вперёд, даже если путь трудный.",
                    "Маленькие победы приводят к большим успехам.",
                    "Ошибки - это путь к совершенствованию.",
                    "Сосредоточься на процессе, а не на результате.",
                    "Ты можешь больше, чем тебе кажется.",
                    "Если веришь, то найдешь путь.",
                    "Успех - это серия маленьких шагов.",
                    "Каждый день - новый шанс для прогресса.",
                    "Сильные духом не сдаются.",
                    "Твоя настойчивость - твоё главное оружие.",
                    "Сегодняшний день - ещё одна возможность быть лучше.",
                    "Каждое препятствие - это возможность.",
                    "Трудности делают тебя сильнее.",
                    "Преодолей одну преграду, чтобы преодолеть все.",
                    "Поставь цель и иди к ней.",
                    'Каждое "нет" приближает тебя к "да".',
                    "Ты способен на многое, если веришь в себя.",
                    "Помни, что время всегда на твоей стороне.",
                    "Каждая победа начинается с одного шага.",
                    "Не сдавайся на полпути.",
                    "Маленькие усилия каждый день ведут к большому результату.",
                    "Уверенность в себе - ключ к успеху.",
                    "Смелость - это когда ты продолжаешь, несмотря на страх.",
                    "Побеждает тот, кто верит в успех.",
                    "Неудачи - это часть пути к вершине.",
                    "Каждый день - это шанс стать лучше.",
                    "Никогда не останавливайся на достигнутом.",
                    "Дорогу осилит идущий.",
                    "Будь настойчив, несмотря на трудности.",
                    "Твой успех - в твоих руках.",
                    "Преодоление трудностей делает тебя сильнее.",
                    "Каждый шаг - это движение вперёд.",
                    "Трудности временные, успех - навсегда.",
                    "Ты можешь больше, чем тебе кажется.",
                    "Не важно, как долго ты идёшь, главное - не останавливаться.",
                    "Старайся лучше, чем вчера.",
                    "Ты можешь всё, если веришь в себя.",
                    "Сегодня ты на шаг ближе к цели.",
                    "Преодолей трудности - и ты станешь сильнее.",
                    "Каждый день - шанс на успех.",
                    "Будь уверен в себе и иди к цели.",
                    "Твой путь к успеху начинается сейчас.",
                    "Преодолевай свои страхи и иди вперёд.",
                    "Ты сильнее, чем думаешь.",
                    "Никогда не сдавайся, даже если тяжело.",
                ]

                # Добавление фраз в таблицу, пропуская уже существующие фразы
                cursor.executemany('''
                    INSERT OR IGNORE INTO quotes (quote) VALUES (?)
                ''', [(quote,) for quote in quotes])

                # Сохранение изменений
                conn.commit()
            print("База данных успешно создана и заполнена!")
        else:
            print("База данных уже существует. Проверьте, что она не повреждена.")
    except sqlite3.Error as e:
        print(f"Ошибка при работе с базой данных: {e}")

# Вызов функции создания и заполнения базы данных
create_motivational_db()
